(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{37:function(e,a,t){e.exports=t(77)},42:function(e,a,t){},75:function(e,a,t){},77:function(e,a,t){"use strict";t.r(a);var n=t(0),o=t.n(n),i=t(13),r=t.n(i),c=(t(42),t(5)),l=t(15),d=t(11),s=t(6),m={duration:.6,ease:[.43,.13,.23,.96]},u={initial:{opacity:0,delay:0,y:50},enter:{opacity:1,y:0,transition:m},exit:{opacity:0,y:50,transition:m}},p=function(){return o.a.createElement(c.b.div,{initial:"initial",animate:"enter",exit:"exit",variants:u,className:"col p-0"},o.a.createElement("div",{className:"place-tag"},o.a.createElement(c.b.div,{initial:"initial",animate:"enter",exit:"exit",variants:Object(s.a)({},u,{initial:{y:-50,opacity:0,transition:m},exit:{y:-50,opacity:0,transition:m}}),className:"headline h-40"},o.a.createElement("p",null,"Platziere einen Tag auf der ",o.a.createElement("b",null,"make things talk")," Box um dein Video damit zu verkn\xfcpfen.")),o.a.createElement("div",{className:"place-tag-animation h-60"},o.a.createElement("div",{className:"animation-box"},o.a.createElement(c.b.div,{animate:{y:50},transition:{ease:"easeInOut",flip:1/0,duration:6},className:"animation-tag"})))))},g={duration:1,ease:[.43,.13,.23,.96]},f=(Object(s.a)({duration:1},g),t(10)),h=function(e){return{type:"SET_OLD_PAGE",oldPage:e}},E=function(e){return{type:"TEST_UPLOAD",state:e}},v=Object(f.b)((function(e){return{tagCommand:e.command,oldPage:e.oldPage}}),(function(e){return{setOldPage:function(a){e(h(a))}}}))((function(e){var a=Object(d.f)(),t=Object(d.g)().pathname;return"NewTAG"===e.tagCommand&&e.oldPage!==t&&(e.setOldPage(t),a.push("/taglink")),o.a.createElement(c.b.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0,transition:{duration:.75}},className:"container-fluid p-0"},o.a.createElement("div",{className:"row vh-100 p0 m-0 gradient-bg"},o.a.createElement(p,null)))})),O=t(17),b=t.n(O),y=t(32),N=t(33),D=t.n(N),_=t(36),w=t(35),j={ease:"backOut",duration:.8},T={open:Object(s.a)({scale:[0,1],opacity:[0,1],rotate:[-40,0]},j),uploaded:Object(s.a)({scale:[1,1.3,1],rotate:[0,10,0]},j)},A=Object(f.b)((function(e){return{tagID:e.tagID,tagName:e.tagName,tagColor:e.tagColor,media:e.media,upload:e.upload}}))((function(e){return o.a.createElement(w.motion.div,{animate:!1===e.upload?"uploaded":"open",variants:T,transition:{ease:"backOut",duration:.8},className:"tag d-flex flex-column justify-content-center align-items-center"},o.a.createElement("div",{className:"upload-progress",style:{transform:"scaleY("+e.scale+")",backgroundColor:e.tagColor}}),o.a.createElement("h2",null,e.tagName),o.a.createElement("h5",null,e.tagID),e.media?o.a.createElement("h5",null,e.media):"")})),P=(t(75),window.location.hostname),k="",I=Object(f.b)((function(e){return{tagCommand:e.command,oldPage:e.oldPage,upload:e.upload}}),(function(e){return{setOldPage:function(a){e(h(a))},addMedia:function(a){e(function(e){return{type:"ADD_MEDIA",media:e}}(a))},testUpload:function(){e(E(!0)),setTimeout((function(){e(E(!1))}),5e3)}}}))((function(e){var a=Object(d.f)(),t=Object(d.g)().pathname;"Idle"!==e.tagCommand||e.oldPage===t||e.upload||(a.push("/"),e.setOldPage(t));var i=Object(n.useCallback)((function(a,t){var n=D.a.post("http://"+P+":4000/api/upload/");a.forEach((function(e){n.attach(e.name,e)})),n.end(),function(){return x.apply(this,arguments)}("http://"+P+":4000/api/tag/link",{tagId:e.tagID,mediaId:a[0].name}).then((function(e){console.log(e)}))}),[]),r=Object(_.a)({onDrop:i,multiple:!1,accept:"video/*"}),l=r.getRootProps,s=r.getInputProps,m=r.isDragActive;switch(e.upload){case!0:k="Video wird hochgeladen ...";break;case!1:k="Das Video wurde erfolgreich verkn\xfcpft. ";break;default:k="Klicke auf den Bildschirm oder lege einfach dein Video hier ab um es mit dem Tag zu verkn\xfcpfen"}return o.a.createElement(c.b.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0,transitino:{duration:.75}},className:"container-fluid p-0"}," ",o.a.createElement("div",Object.assign({id:"dropzone-area",className:m?"active":""},l()),o.a.createElement("input",s()),o.a.createElement("div",{className:"row vh-100 p0 m-0 bg"},o.a.createElement("div",{className:"col p-0 d-flex flex-column justify-content-center align-items-center"},o.a.createElement(A,{scale:e.upload?0:1}),o.a.createElement(c.b.p,{animate:{opacity:[0,1]},transition:{duration:1,delay:1},className:"headline mt-5"},k)))))}));function x(){return(x=Object(y.a)(b.a.mark((function e(){var a,t,n=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.length>0&&void 0!==n[0]?n[0]:"",t=n.length>1&&void 0!==n[1]?n[1]:{},e.next=4,fetch(a,{method:"POST",mode:"same-origin",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(t)});case 4:e.sent;case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var C=t(24),S=t.n(C);S.a.seed(parseInt(999*Math.random()));var G={command:"",media:null,tagID:"",oldPage:null,tagName:S()().join(" "),tagColor:function(){var e=M(1,360),a=M(60,80),t=M(45,55);return"hsl("+e+","+a+"%,"+t+"%)"}(),upload:null},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"NEW_TAG":var t={command:a.command,media:a.media,tagID:a.tagID};for(var n in e)void 0!==t[n]&&null!==t[n]||(t[n]=e[n]);return t;case"ADD_MEDIA":return Object(s.a)({},e,{media:a.media});case"ADD_TAG_COLOR":return Object(s.a)({},e,{tagColor:a.tagColor});case"ADD_TAG_NAME":return Object(s.a)({},e,{tagName:a.tagName});case"SET_OLD_PAGE":return Object(s.a)({},e,{oldPage:a.oldPage});case"TEST_UPLOAD":return Object(s.a)({},e,{upload:a.state})}return e};function M(e,a){return parseInt(Math.random()*(a-e+1),10)+e}var W,V=t(16),B=Object(V.b)(L,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());window.location.hostname;var R=function(){return function(){var e=new WebSocket("ws://192.168.178.43:8090",["soap","xmpp"]);e.onopen=function(){console.log("CONNECTED TO WS")},e.onmessage=function(e){try{W=JSON.parse(e.data),console.log("WS:",W)}catch(o){console.error(o)}var a,t,n;B.dispatch((a=W.command,t=W.media,n=W.tagID,{type:"NEW_TAG",command:a,media:t,tagID:n})),B.dispatch({type:"ADD_TAG_COLOR",tagColor:W.tagColor}),B.dispatch({type:"ADD_TAG_NAME",tagName:W.tagName})}}(),o.a.createElement("div",{className:"App"},o.a.createElement(l.a,null,o.a.createElement(d.a,{render:function(e){var a=e.location;return o.a.createElement(c.a,{exitBeforeEnter:!0},o.a.createElement(d.c,{location:a,key:a.pathname},o.a.createElement(d.a,{exact:!0,path:"/",component:v}),o.a.createElement(d.a,{path:"/taglink",component:I})))}})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(f.a,{store:B},o.a.createElement(R,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[37,1,2]]]);
//# sourceMappingURL=main.58513ed5.chunk.js.map