(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{35:function(e,a,t){e.exports=t(69)},40:function(e,a,t){},67:function(e,a,t){},69:function(e,a,t){"use strict";t.r(a);var n=t(0),o=t.n(n),i=t(13),r=t.n(i),c=(t(40),t(5)),l=t(15),m=t(11),d=t(6),s={duration:.6,ease:[.43,.13,.23,.96]},u={initial:{opacity:0,delay:0,y:50},enter:{opacity:1,y:0,transition:s},exit:{opacity:0,y:50,transition:s}},p=function(){return o.a.createElement(c.b.div,{initial:"initial",animate:"enter",exit:"exit",variants:u,className:"col p-0"},o.a.createElement("div",{className:"place-tag"},o.a.createElement(c.b.div,{initial:"initial",animate:"enter",exit:"exit",variants:Object(d.a)({},u,{initial:{y:-50,opacity:0,transition:s},exit:{y:-50,opacity:0,transition:s}}),className:"headline h-40"},o.a.createElement("p",null,"Platziere einen Tag auf der ",o.a.createElement("b",null,"make things talk")," Box um dein Video damit zu verkn\xfcpfen.")),o.a.createElement("div",{className:"place-tag-animation h-60"},o.a.createElement("div",{className:"animation-box"},o.a.createElement(c.b.div,{animate:{y:50},transition:{ease:"easeInOut",flip:1/0,duration:6},className:"animation-tag"})))))},g={duration:1,ease:[.43,.13,.23,.96]},f=(Object(d.a)({duration:1},g),t(10)),h=function(e){return{type:"SET_OLD_PAGE",oldPage:e}},E=function(e){return{type:"TEST_UPLOAD",state:e}},b=Object(f.b)((function(e){return{tagCommand:e.command,oldPage:e.oldPage}}),(function(e){return{setOldPage:function(a){e(h(a))}}}))((function(e){var a=Object(m.f)(),t=Object(m.g)().pathname;return"NewTAG"===e.tagCommand&&e.oldPage!==t&&(e.setOldPage(t),a.push("/taglink")),o.a.createElement(c.b.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0,transition:{duration:.75}},className:"container-fluid p-0"},o.a.createElement("div",{className:"row vh-100 p0 m-0 gradient-bg"},o.a.createElement(p,null)))})),v=t(17),O=t.n(v),y=t(31),N=t(34),D=t(33),_={ease:"backOut",duration:.8},w={open:Object(d.a)({scale:[0,1],opacity:[0,1],rotate:[-40,0]},_),uploaded:Object(d.a)({scale:[1,1.3,1],rotate:[0,10,0]},_)},j=Object(f.b)((function(e){return{tagID:e.tagID,tagName:e.tagName,tagColor:e.tagColor,media:e.media,upload:e.upload}}))((function(e){return o.a.createElement(D.motion.div,{animate:!1===e.upload?"uploaded":"open",variants:w,transition:{ease:"backOut",duration:.8},className:"tag d-flex flex-column justify-content-center align-items-center"},o.a.createElement("div",{className:"upload-progress",style:{transform:"scaleY("+e.scale+")",backgroundColor:e.tagColor}}),o.a.createElement("h2",null,e.tagName),o.a.createElement("h5",null,e.tagID),e.media?o.a.createElement("h5",null,e.media):"")})),T=(t(67),window.location.hostname),P="",A=Object(f.b)((function(e){return{tagCommand:e.command,oldPage:e.oldPage,upload:e.upload}}),(function(e){return{setOldPage:function(a){e(h(a))},addMedia:function(a){e(function(e){return{type:"ADD_MEDIA",media:e}}(a))},testUpload:function(){e(E(!0)),setTimeout((function(){e(E(!1))}),5e3)}}}))((function(e){var a=Object(m.f)(),t=Object(m.g)().pathname;"Idle"!==e.tagCommand||e.oldPage===t||e.upload||(a.push("/"),e.setOldPage(t));var i=Object(n.useCallback)((function(a,t){var n=new FormData;a.map((function(e,a){n.append(e.name,e)})),fetch("http://192.168.178.43:4000/api/upload/",{method:"POST",body:n}).then((function(e){return e.json()})).then((function(e){console.log("SUCESS",e)})).catch((function(e){return console.log(e)})),function(){return k.apply(this,arguments)}("http://"+T+":4000/api/tag/link",{tagId:e.tagID,mediaId:a[0].name}).then((function(e){console.log(e)}))}),[]),r=Object(N.a)({onDrop:i,multiple:!1,accept:"video/*"}),l=r.getRootProps,d=r.getInputProps,s=r.isDragActive;switch(e.upload){case!0:P="Video wird hochgeladen ...";break;case!1:P="Das Video wurde erfolgreich verkn\xfcpft. ";break;default:P="Klicke auf den Bildschirm oder lege einfach dein Video hier ab um es mit dem Tag zu verkn\xfcpfen"}return o.a.createElement(c.b.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0,transitino:{duration:.75}},className:"container-fluid p-0"}," ",o.a.createElement("form",{method:"post",action:"/api/upload/",enctype:"multipart/form-data"},"FileUpload currenty only mp4",o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("input",{type:"file",id:"files",name:"files"}),o.a.createElement("button",{type:"submit",id:"submitfile"},"submit")),o.a.createElement("div",Object.assign({id:"dropzone-area",className:s?"active":""},l()),o.a.createElement("input",d()),o.a.createElement("div",{className:"row vh-100 p0 m-0 bg"},o.a.createElement("div",{className:"col p-0 d-flex flex-column justify-content-center align-items-center"},o.a.createElement(j,{scale:e.upload?0:1}),o.a.createElement(c.b.p,{animate:{opacity:[0,1]},transition:{duration:1,delay:1},className:"headline mt-5"},P)))))}));function k(){return(k=Object(y.a)(O.a.mark((function e(){var a,t,n=arguments;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.length>0&&void 0!==n[0]?n[0]:"",t=n.length>1&&void 0!==n[1]?n[1]:{},e.next=4,fetch(a,{method:"POST",mode:"same-origin",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(t)});case 4:e.sent;case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var I=t(24),x=t.n(I);x.a.seed(parseInt(999*Math.random()));var C={command:"",media:null,tagID:"",oldPage:null,tagName:x()().join(" "),tagColor:function(){var e=G(1,360),a=G(60,80),t=G(45,55);return"hsl("+e+","+a+"%,"+t+"%)"}(),upload:null},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"NEW_TAG":var t={command:a.command,media:a.media,tagID:a.tagID};for(var n in e)void 0!==t[n]&&null!==t[n]||(t[n]=e[n]);return t;case"ADD_MEDIA":return Object(d.a)({},e,{media:a.media});case"ADD_TAG_COLOR":return Object(d.a)({},e,{tagColor:a.tagColor});case"ADD_TAG_NAME":return Object(d.a)({},e,{tagName:a.tagName});case"SET_OLD_PAGE":return Object(d.a)({},e,{oldPage:a.oldPage});case"TEST_UPLOAD":return Object(d.a)({},e,{upload:a.state})}return e};function G(e,a){return parseInt(Math.random()*(a-e+1),10)+e}var L,M=t(16),U=Object(M.b)(S,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());window.location.hostname;var W=function(){return function(){var e=new WebSocket("ws://192.168.178.43:8090",["soap","xmpp"]);e.onopen=function(){console.log("CONNECTED TO WS")},e.onmessage=function(e){try{L=JSON.parse(e.data),console.log("WS:",L)}catch(o){console.error(o)}var a,t,n;U.dispatch((a=L.command,t=L.media,n=L.tagID,{type:"NEW_TAG",command:a,media:t,tagID:n})),U.dispatch({type:"ADD_TAG_COLOR",tagColor:L.tagColor}),U.dispatch({type:"ADD_TAG_NAME",tagName:L.tagName})}}(),o.a.createElement("div",{className:"App"},o.a.createElement(l.a,null,o.a.createElement(m.a,{render:function(e){var a=e.location;return o.a.createElement(c.a,{exitBeforeEnter:!0},o.a.createElement(m.c,{location:a,key:a.pathname},o.a.createElement(m.a,{exact:!0,path:"/",component:b}),o.a.createElement(m.a,{path:"/taglink",component:A})))}})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(f.a,{store:U},o.a.createElement(W,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[35,1,2]]]);
//# sourceMappingURL=main.93f03b88.chunk.js.map